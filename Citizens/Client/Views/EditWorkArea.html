<h6 ng-show="loader.calcPeople">Виконується підрахунок кількості фізичних осіб... <i class="fa fa-refresh fa-spin"></i></h6>
<hr />
<form ng-submit="saveChanges()">
    <div class="container row form-horizontal">
        <div class="form-group col-lg-2">
            <label>Номер</label>
            <input ng-model="data.workArea.Number" type="number" class="form-control" required>
        </div>
        <div class="form-group col-lg-2">
            <label>Виборча дільниця</label>
            <input type="text" typeahead="p as p.Number for p in data.precincts | filter: {Number:$viewValue} | orderByStartsWith:{Number:$viewValue} | limitTo:10"
                   ng-model="data.workArea.Precinct" typeahead-on-select="onSelectPrecinct($item)" ng-disabled="data.workArea.Id" class="form-control" required>
            <i ng-show="loader.loadingPrecinctAddresses" class="fa fa-refresh fa-spin"></i>
        </div>
        <div class="form-group col-lg-8">
            <label>Відповідальний</label>
            <input typeahead="p as p.LastName +' '+ p.FirstName + ' ' + p.MidleName + ', ' + p.formatedDateOfBirth +' р.н.' + ', ' + p.address for p in getPeopleByName($viewValue)"
                   type="text" ng-model="data.workArea.Top" typeahead-loading="loadingPeople" typeahead-no-results="noResults" typeahead-min-length="10" class="form-control" required>
            <i ng-show="loadingPeople" class="fa fa-refresh fa-spin"></i>
            <div ng-show="noResults">
                <i class="glyphicon glyphicon-remove"></i> Фізособу не знайдено
            </div>
        </div>
    </div>
    <div class="container row">
        <button type="submit" class="btn btn-sm btn-success" title="Зберегти зміни">
            <span class="glyphicon glyphicon-save"></span> Зберегти
            <i ng-show="loader.saving" class="fa fa-refresh fa-spin"></i>
        </button>
        <button type="button" class="btn btn-sm btn-success" ng-click="backToList()" title="Повернутися до списку робочих дільниць">
            <span class="glyphicon glyphicon-arrow-left"></span> Завершити
        </button>
        <button type="button" ng-click="calcPeopleAtAddresses()" class="btn btn-sm btn-success">
            <span class="glyphicon glyphicon-refresh"></span> Обчислити к-сть фізосіб
        </button>
    </div>
</form>
<br />
<table class="table table-striped table-bordered">
    <thead>
        <tr>
            <th>№</th>
            <th></th>
            <th class="col-sm-3" title="Редагування здійснюється подвійним натиснення лівої кнопки миші на назві колонки">
                <span ng-hide="theadEditing.city" ng-dblclick="onDblClickThead('city')">Населений пункт <span class="glyphicon glyphicon-filter"></span></span>
                <div ng-show="theadEditing.city" class="input-group">
                    <input type="text" typeahead=" c.Name for c in cities | filter: {Name:$viewValue} | orderByStartsWith:{Name:$viewValue} | limitTo:10" 
                            ng-model="query.city" class="form-control" placeholder="Населений пункт" autofocus>
                    <span class="input-group-btn">
                        <button type="button" class="btn btn-default" ng-click="doneEditingThead('city')" title="Скасувати фільтр">
                            <span class="glyphicon glyphicon-remove"></span>
                        </button>
                    </span>
                </div>
            </th>
            <th class="col-sm-3" title="Редагування здійснюється подвійним натиснення лівої кнопки миші на назві колонки">
                <span ng-hide="theadEditing.street" ng-dblclick="onDblClickThead('street')">Вулиця <span class="glyphicon glyphicon-filter"></span></span>
                <div ng-show="theadEditing.street" class="input-group">
                    <input type="text" typeahead=" s.Name for s in streets | filter: {Name:$viewValue} | orderByStartsWith:{Name:$viewValue} | limitTo:10"
                            ng-model="query.street" class="form-control" placeholder="Вулиця" autofocus>
                    <span class="input-group-btn">
                        <button type="button" class="btn btn-default" ng-click="doneEditingThead('street')" title="Скасувати фільтр">
                            <span class="glyphicon glyphicon-remove"></span>
                        </button>
                    </span>
                </div>
            </th>
            <th class="col-sm-2" title="Редагування здійснюється подвійним натиснення лівої кнопки миші на назві колонки">
                <span ng-hide="theadEditing.house" ng-dblclick="onDblClickThead('house')">Буд. <span class="glyphicon glyphicon-filter"></span></span>
                <div ng-show="theadEditing.house" class="input-group">
                    <input type="text" ng-model="query.house" class="form-control" placeholder="№ буд." autofocus>
                    <span class="input-group-btn">
                        <button type="button" class="btn btn-default" ng-click="doneEditingThead('house')" title="Скасувати фільтр">
                            <span class="glyphicon glyphicon-remove"></span>
                        </button>
                    </span>
                </div>
            </th>
            <th class="col-sm-2" title="Редагування здійснюється подвійним натиснення лівої кнопки миші на назві колонки">
                <span ng-hide="theadEditing.houseType" ng-dblclick="onDblClickThead('houseType')">Тип будинку <span class="glyphicon glyphicon-filter"></span></span>
                <div ng-show="theadEditing.houseType" class="input-group">
                    <select class="form-control" ng-model="query.houseType" ng-options="ht as ht for ht in data.houseTypes"></select>
                    <span class="input-group-btn">
                        <button type="button" class="btn btn-default" ng-click="doneEditingThead('houseType')" title="Скасувати фільтр">
                            <span class="glyphicon glyphicon-remove"></span>
                        </button>
                    </span>
                </div>
            </th>
            <th>К-сть квартир</th>
            <th>К-сть фізосіб</th>
        </tr>
    </thead>
    <tbody>
        <tr dir-paginate="address in data.precinctAddresses | filter: {City: { Name: query.city }, Street: { Name: query.street }, House: query.house, HouseType: query.houseType} | itemsPerPage: pagination.pageSize" current-page="pagination.currentPage" pagination-id="workAreaAddressesPagination">
            <td class="{{markAddress(address)}}">{{ getIndex($index) + 1 }}</td>
            <td class="{{markAddress(address)}}"><input type="checkbox" class="checkbox-inline" ng-click="toggleSelection(address)" ng-checked="checked(address)"></td>
            <td class="{{markAddress(address)}}">{{address.City.CityType.Name}} {{address.City.Name}}</td>
            <td class="{{markAddress(address)}}">{{address.Street.StreetType.Name}} {{address.Street.Name}}</td>
            <td class="{{markAddress(address)}}">{{address.House}}</td>
            <td class="{{markAddress(address)}}">{{address.HouseType}}</td>
            <td class="{{markAddress(address)}}">{{address.Apartments}}</td>
            <td class="{{markAddress(address)}}">{{address.countPeople}}</td>
        </tr>
    </tbody>
    <div>
        <label>Всього к-сть фізичних осіб: {{totalCount.precinct}}, з них по робочі дільниці: {{totalCount.workArea}} </label>
    </div>
</table>
<dir-pagination-controls boundary-links="true" on-page-change="onPageChange(newPageNumber)" pagination-id="workAreaAddressesPagination"></dir-pagination-controls>
    
    

